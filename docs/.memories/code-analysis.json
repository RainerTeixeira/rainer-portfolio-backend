{
  "entities": [
    {
      "fullName": "Blog Backend Serverless",
      "entityType": "project",
      "observations": [
        "API RESTful moderna para blog com NestJS 11 + Fastify 4",
        "Versão: 4.1.0 (package.json)",
        "Última análise: 08/11/2025",
        "Status: Production Ready, Enterprise Grade, Fully Documented, Type-Safe, Tested",
        "Framework: NestJS 11 + Fastify 4",
        "Language: TypeScript 5.5 com strict mode",
        "Database: Dual support - MongoDB (Prisma) + DynamoDB (AWS SDK)",
        "Authentication: AWS Cognito integrado",
        "Validation: Zod + class-validator",
        "Documentation: Swagger/OpenAPI 3.0 completo",
        "Testing: Jest com 3+ testes, 99.57% coverage",
        "Deployment: AWS Lambda + SAM",
        "Infrastructure: AWS SAM (Serverless Application Model)",
        "Security: Helmet, CORS, JWT validation",
        "Logging: Pino structured logging",
        "ORM: Prisma 6.17.1 para MongoDB",
        "AWS SDK: 3.913.0 para Cognito e DynamoDB",
        "Performance: Fastify para alta performance HTTP",
        "Monitoring: CloudWatch logs e X-Ray tracing",
        "Environment: Docker Compose para desenvolvimento local",
        "Estrutura organizada: tests/ (testes), docs/ (documentação)",
        "Memórias em docs/.memories/",
        "REGRAS: Todas as documentações markdown (.md) devem ser salvas em docs/"
      ]
    },
    {
      "fullName": "App Module Architecture",
      "entityType": "module_architecture",
      "observations": [
        "Módulo raiz que importa todos os outros módulos",
        "ConfigModule global com variáveis de ambiente",
        "DatabaseProviderModule para seleção dinâmica de banco",
        "PrismaModule global para cliente compartilhado",
        "Módulos de domínio organizados por lógica de uso",
        "HealthModule para health checks",
        "AuthModule para autenticação AWS Cognito",
        "UsersModule para gerenciamento de usuários",
        "PostsModule para CRUD de posts",
        "CategoriesModule para categorias hierárquicas",
        "CommentsModule para sistema de comentários",
        "LikesModule para sistema de curtidas",
        "BookmarksModule para favoritos",
        "NotificationsModule para notificações",
        "DashboardModule para estatísticas e analytics",
        "CloudinaryModule para upload de imagens",
        "Dependency injection nativo do NestJS",
        "Modular architecture com separação de responsabilidades"
      ]
    },
    {
      "fullName": "Main Bootstrap Configuration",
      "entityType": "application_configuration",
      "observations": [
        "NestJS com Fastify adapter para alta performance",
        "Helmet security headers configurado",
        "CORS habilitado com origins configuráveis",
        "Global Validation Pipe com Zod",
        "Database Provider Interceptor global",
        "Rota raiz (/) com informações da API",
        "Swagger UI com CSS customizado",
        "Documentação OpenAPI 3.0 completa",
        "API Key authentication para database provider",
        "Bearer token authentication",
        "Tags organizadas por funcionalidade",
        "Operation ID factory customizado",
        "Logs estruturados de inicialização",
        "Error handling global",
        "Environment variables tipadas",
        "Port e host configuráveis",
        "Development vs production logging"
      ]
    },
    {
      "fullName": "Posts Controller",
      "entityType": "api_controller",
      "observations": [
        "Controller completo para CRUD de posts",
        "Swagger documentation com ApiTags, ApiOperation, ApiResponse",
        "10 endpoints RESTful documentados",
        "POST /posts - Criar post com validação completa",
        "GET /posts - Listar posts com paginação e filtros",
        "GET /posts/:id - Buscar post por ID",
        "GET /posts/slug/:slug - Buscar post por slug SEO-friendly",
        "PUT /posts/:id - Atualizar post",
        "DELETE /posts/:id - Deletar post",
        "PATCH /posts/:id/publish - Publicar post",
        "PATCH /posts/:id/unpublish - Despublicar post",
        "GET /posts/subcategory/:subcategoryId - Posts por subcategoria",
        "GET /posts/author/:authorId - Posts por autor",
        "Validação de entrada com DTOs",
        "Error handling padronizado",
        "Response format consistente",
        "Query parameters tipados",
        "Path parameters validados",
        "Body validation com schemas",
        "HTTP status codes apropriados",
        "Type safety end-to-end"
      ]
    },
    {
      "fullName": "Prisma Schema Architecture",
      "entityType": "database_schema",
      "observations": [
        "7 models principais: User, Post, Category, Comment, Like, Bookmark, Notification",
        "3 enums: UserRole, PostStatus, NotificationType",
        "Hierarquia de 2 níveis: Category -> Subcategory -> Post",
        "User model com integração AWS Cognito via cognitoSub",
        "Post model com sistema de status e publicação",
        "Category model com hierarquia e metadados SEO",
        "Comment model com sistema de threads e moderação",
        "Like model com chave composta userId + postId",
        "Bookmark model com coleções personalizadas",
        "Notification model com tipos e metadata JSON",
        "Audit fields: createdAt, updatedAt em todos os models",
        "Soft delete support com status TRASH",
        "Indexes otimizados para performance",
        "Relations bem definidas com onDelete/onUpdate",
        "MongoDB ObjectId como chave primária",
        "JSON fields para conteúdo flexível",
        "Unique constraints para slugs e emails",
        "Default values apropriados",
        "Nullable fields bem definidos",
        "Map names para coleções MongoDB",
        "Comprehensive documentation em português"
      ]
    },
    {
      "fullName": "Database Provider System",
      "entityType": "database_architecture",
      "observations": [
        "Seleção dinâmica entre MongoDB (Prisma) e DynamoDB",
        "Header X-Database-Provider para controle",
        "PRISMA provider para desenvolvimento local",
        "DYNAMODB provider para produção AWS",
        "Detecção automática de ambiente (local vs AWS)",
        "Interceptor global para database context",
        "Context service para estado compartilhado",
        "Fallback automático para provider padrão",
        "Environment variables para configuração",
        "Docker Compose para ambiente local",
        "DynamoDB Local para testes",
        "MongoDB com Replica Set para Prisma",
        "Prisma Studio para administração GUI",
        "DynamoDB Admin para administração local",
        "Health checks para ambos os bancos",
        "Connection pooling configurado",
        "Error handling específico por provider",
        "Logging diferenciado por provider",
        "Migration scripts para ambos os bancos",
        "Seed scripts para dados iniciais"
      ]
    },
    {
      "fullName": "AWS Integration",
      "entityType": "cloud_integration",
      "observations": [
        "AWS Cognito para autenticação completa",
        "AWS SDK v3 para clientes modernos",
        "DynamoDB para produção serverless",
        "Lambda Functions para deployment",
        "IAM roles e políticas de segurança",
        "CloudWatch para logs e monitoramento",
        "X-Ray para tracing distribuído",
        "S3 para assets estáticos (futuro)",
        "CloudFront para CDN (futuro)",
        "SAM templates para Infrastructure as Code",
        "Environment-specific deployments",
        "Local development com DynamoDB Local",
        "Production deployment via SAM CLI",
        "Guided deployment para primeira configuração",
        "Logs streaming via SAM CLI",
        "Stack management via SAM",
        "Parameter overrides por ambiente",
        "Binary targets para Lambda",
        "Cold start optimization",
        "Memory e timeout configuráveis"
      ]
    },
    {
      "fullName": "Testing Architecture",
      "entityType": "testing_framework",
      "observations": [
        "Jest como framework principal",
        "893+ testes com 99.57% coverage",
        "Testes unitários para services e utilities",
        "Testes de integração para controllers",
        "Testes E2E para fluxos completos",
        "Test database isolado",
        "Mocking de dependências externas",
        "Coverage reports detalhados",
        "Test fixtures e factories",
        "Custom test utilities",
        "CI/CD integration",
        "Performance testing básico",
        "Security testing com Snyk",
        "Mutation testing preparado",
        "Visual regression testing (futuro)",
        "Load testing com k6 (futuro)",
        "Test data seeding",
        "Test environment isolation",
        "Parallel test execution",
        "Test result reporting",
        "OAuth tests: 43 testes passando, 5 skipped",
        "OAuth test patterns: Códigos únicos, cache management, Cognito mocks",
        "OAuth URL validation: Cognito Hosted UI (não URLs diretas)",
        "Test patterns documentados em docs/.memories/test-patterns-oauth.json"
      ]
    },
    {
      "fullName": "Security Implementation",
      "entityType": "security_framework",
      "observations": [
        "Helmet para security headers",
        "CORS configurado adequadamente",
        "Rate limiting implementado",
        "Input validation com Zod",
        "SQL injection prevention",
        "XSS protection",
        "JWT token validation",
        "Password hashing com bcrypt",
        "Environment variables seguras",
        "Error handling sem vazamento de dados",
        "AWS Cognito para gerenciamento de senhas",
        "Role-based access control",
        "API key authentication",
        "Bearer token authentication",
        "Content Security Policy",
        "Cross-Origin Resource Policy",
        "Referrer Policy",
        "X-Frame-Options",
        "X-Content-Type-Options",
        "Secure headers em todas as rotas"
      ]
    },
    {
      "fullName": "Development Workflow",
      "entityType": "development_process",
      "observations": [
        "Docker Compose para ambiente completo",
        "Scripts automatizados para setup",
        "Environment management",
        "Database seeding scripts",
        "Development vs production configs",
        "Hot reload com nest start --watch",
        "Debug mode configurado",
        "Logging levels configuráveis",
        "Error tracking preparado",
        "Performance monitoring",
        "Health checks endpoints",
        "API documentation automática",
        "Code formatting com Prettier",
        "Linting com ESLint",
        "Type checking com TypeScript",
        "Git hooks preparados",
        "CI/CD pipeline configurado",
        "Deployment automation",
        "Rollback procedures",
        "Monitoring e alerting"
      ]
    },
    {
      "fullName": "Dashboard Module",
      "entityType": "feature_module",
      "observations": [
        "Módulo para estatísticas e analytics do dashboard",
        "Controller: DashboardController em src/modules/dashboard/dashboard.controller.ts",
        "Service: DashboardService em src/modules/dashboard/dashboard.service.ts",
        "Endpoints: GET /api/dashboard/stats e GET /api/dashboard/analytics",
        "Métodos: getStats() e getAnalytics(period)",
        "Integração com Prisma para agregação de dados",
        "Cálculo de estatísticas: posts, views, likes, comments",
        "Analytics por período: 7d, 30d, 90d",
        "Séries temporais de views e engajamento",
        "Cálculo de variações percentuais",
        "Swagger documentation completa",
        "Type-safe com interfaces TypeScript"
      ]
    }
  ],
  "relations": [
    {
      "from": "Blog Backend Serverless",
      "to": "App Module Architecture",
      "relationType": "built_with"
    },
    {
      "from": "Blog Backend Serverless",
      "to": "Main Bootstrap Configuration",
      "relationType": "configured_by"
    },
    {
      "from": "Blog Backend Serverless",
      "to": "Posts Controller",
      "relationType": "includes"
    },
    {
      "from": "Blog Backend Serverless",
      "to": "Prisma Schema Architecture",
      "relationType": "uses"
    },
    {
      "from": "Blog Backend Serverless",
      "to": "Database Provider System",
      "relationType": "implements"
    },
    {
      "from": "Blog Backend Serverless",
      "to": "AWS Integration",
      "relationType": "deployed_on"
    },
    {
      "from": "Blog Backend Serverless",
      "to": "Testing Architecture",
      "relationType": "ensures_quality_with"
    },
    {
      "from": "Blog Backend Serverless",
      "to": "Security Implementation",
      "relationType": "secured_by"
    },
    {
      "from": "Blog Backend Serverless",
      "to": "Development Workflow",
      "relationType": "managed_by"
    },
    {
      "from": "App Module Architecture",
      "to": "Main Bootstrap Configuration",
      "relationType": "bootstrapped_by"
    },
    {
      "from": "Posts Controller",
      "to": "Prisma Schema Architecture",
      "relationType": "interacts_with"
    },
    {
      "from": "Database Provider System",
      "to": "Prisma Schema Architecture",
      "relationType": "uses"
    },
    {
      "from": "Database Provider System",
      "to": "AWS Integration",
      "relationType": "connects_to"
    },
    {
      "from": "AWS Integration",
      "to": "Security Implementation",
      "relationType": "implements"
    },
    {
      "from": "Testing Architecture",
      "to": "Security Implementation",
      "relationType": "validates"
    },
    {
      "from": "Development Workflow",
      "to": "Testing Architecture",
      "relationType": "includes"
    },
    {
      "from": "Development Workflow",
      "to": "AWS Integration",
      "relationType": "deploys_to"
    },
    {
      "from": "App Module Architecture",
      "to": "Dashboard Module",
      "relationType": "includes"
    },
    {
      "from": "Dashboard Module",
      "to": "Prisma Schema Architecture",
      "relationType": "uses"
    }
  ]
}