# Cursor Rules - rainer-portfolio-backend

## Context Loading

Este projeto usa um sistema de mem√≥ria estruturado para fornecer contexto completo ao Cursor AI.

### Arquivos de Mem√≥ria

As mem√≥rias do projeto est√£o localizadas em `docs/.memories/`:

1. **initial-memory.json** - Mem√≥ria inicial com entidades, rela√ß√µes e contexto do projeto
2. **technical-details.json** - Detalhes t√©cnicos: endpoints, m√≥dulos, scripts, configura√ß√µes
3. **code-analysis.json** - An√°lise de c√≥digo: arquitetura, estrutura, padr√µes
4. **consolidated-memory.json** - Mem√≥ria consolidada (gerada automaticamente)

### Carregamento Autom√°tico

Para carregar e consolidar as mem√≥rias:

```bash
npm run memory:load
```

Ou para ver em formato texto:

```bash
npm run memory:load:text
```

## üß† Mem√≥ria do Projeto - CARREGAMENTO AUTOM√ÅTICO OBRIGAT√ìRIO (Como MCP)

‚ö†Ô∏è **CR√çTICO**: As mem√≥rias do projeto DEVEM ser SEMPRE carregadas automaticamente, como se fossem MCP (Model Context Protocol).

### üìñ Carregamento Autom√°tico de Mem√≥rias (Tipo MCP)

**REGRAS OBRIGAT√ìRIAS:**
1. **SEMPRE** carregar mem√≥rias automaticamente no in√≠cio de TODA intera√ß√£o
2. **SEMPRE** usar `read_file` para ler os arquivos de mem√≥ria antes de qualquer a√ß√£o
3. **SEMPRE** consultar mem√≥rias antes de fazer mudan√ßas ou responder perguntas
4. As mem√≥rias s√£o CONTEXTO PRIM√ÅRIO - usar como fonte principal de informa√ß√£o

### üîÑ Fluxo Autom√°tico de Carregamento (OBRIGAT√ìRIO)

Ao iniciar QUALQUER intera√ß√£o com este projeto, executar AUTOMATICAMENTE:

```typescript
// CARREGAR MEM√ìRIAS AUTOMATICAMENTE (Tipo MCP)
1. read_file('docs/.memories/initial-memory.json')
2. read_file('docs/.memories/technical-details.json')
3. read_file('docs/.memories/code-analysis.json') // Se necess√°rio para contexto arquitetural
```

**N√ÉO ESPERAR** que o usu√°rio solicite - carregar automaticamente como contexto MCP.

### üìã Arquivos de Mem√≥ria (Carregar Automaticamente)

1. **PRIMEIRO (SEMPRE)**: `docs/.memories/initial-memory.json` - Contexto geral do projeto
2. **SEGUNDO (SEMPRE)**: `docs/.memories/technical-details.json` - Detalhes t√©cnicos, endpoints, m√≥dulos
3. **TERCEIRO (QUANDO NECESS√ÅRIO)**: `docs/.memories/code-analysis.json` - An√°lise arquitetural

**Comandos dispon√≠veis (para refer√™ncia):**
```bash
npm run memory:read        # Ler todas as mem√≥rias
npm run memory:update      # Atualizar mem√≥rias
npm run memory:load        # Gerar mem√≥ria consolidada
```

**Mas lembre-se**: No Cursor, use `read_file` diretamente para carregar como MCP.

### Localiza√ß√£o das Mem√≥rias
- `docs/.memories/initial-memory.json` - Conhecimento geral do projeto
- `docs/.memories/technical-details.json` - Detalhes t√©cnicos, endpoints, scripts
- `docs/.memories/code-analysis.json` - An√°lise de c√≥digo e arquitetura
- `docs/.memories/consolidated-memory.json` - Mem√≥ria consolidada (gerada automaticamente)

### Comandos para Atualizar/Ler Mem√≥rias
- `npm run memory:update` - Atualiza todas as mem√≥rias com informa√ß√µes atuais
- `npm run memory:read` - L√™ e exibe todas as mem√≥rias
- `npm run memory:load` - Gera mem√≥ria consolidada (JSON)
- `npm run memory:load:text` - Exibe mem√≥ria consolidada em formato texto
- `tsx scripts/update-memory.ts` - Atualiza mem√≥rias manualmente
- `tsx scripts/read-memory.ts [tipo]` - L√™ mem√≥rias (all|initial|technical|code)

### Fluxo de Trabalho Recomendado

1. **Antes de come√ßar qualquer tarefa:**
   ```bash
   npm run memory:read
   ```
   Ou leia diretamente os arquivos em `docs/.memories/`

2. **Ap√≥s mudan√ßas significativas no projeto:**
   ```bash
   npm run memory:update
   ```

3. **Ao fazer commits importantes:**
   - Atualizar mem√≥rias se estrutura do projeto mudou
   - Atualizar mem√≥rias se vers√£o ou depend√™ncias mudaram
   - Atualizar mem√≥rias se novos m√≥dulos foram adicionados

### Estrutura do Projeto

- **C√≥digo fonte:** `src/`
- **Testes:** `tests/` (organizados por tipo: unit, integration, e2e)
- **Documenta√ß√£o:** `docs/` (organizada em categorias numeradas)
- **Scripts:** `scripts/` (utilit√°rios) e `scripts/testes/` (scripts de teste)
- **Mem√≥rias:** `docs/.memories/` (informa√ß√µes do projeto para IA/ferramentas)

### Informa√ß√µes Importantes do Projeto

- **Framework**: NestJS 11 + Fastify 4
- **Linguagem**: TypeScript 5.x (strict mode)
- **Databases**: MongoDB (Prisma) + DynamoDB (AWS SDK)
- **Auth**: AWS Cognito
- **Deploy**: AWS Lambda + SAM (Serverless)
- **Testing**: Jest com 99.57% coverage
- **Endpoints**: 65 endpoints REST documentados
- **Qualidade**: Enterprise Grade, Production Ready
- **M√≥dulos**: Organizados por dom√≠nio (blog, dashboard, users, etc.)

### Padr√µes do Projeto

- Use TypeScript strict mode
- M√≥dulos NestJS organizados por dom√≠nio
- DTOs com valida√ß√£o Zod + class-validator
- Testes organizados em `tests/` (unit, integration, e2e)
- Scripts organizados em `scripts/` e `scripts/testes/`
- Documenta√ß√£o completa em `docs/` organizada por categorias
- Mem√≥rias do projeto em `docs/.memories/`

### Estrutura de Diret√≥rios

```
src/              - C√≥digo fonte NestJS
tests/            - Testes organizados por tipo
docs/             - Documenta√ß√£o
  .memories/      - Arquivos de mem√≥ria para IA
scripts/          - Scripts utilit√°rios
  testes/        - Scripts de teste separados
```

### ‚ö° Carregamento Autom√°tico (Tipo MCP) - OBRIGAT√ìRIO

**REGRAS CR√çTICAS PARA CURSOR AI:**

1. **CARREGAMENTO AUTOM√ÅTICO**: Sempre carregar mem√≥rias no in√≠cio de cada intera√ß√£o
   - N√£o esperar solicita√ß√£o do usu√°rio
   - Tratar como contexto MCP (sempre dispon√≠vel)
   - Usar `read_file` para carregar os 3 arquivos principais

2. **PRIORIDADE**: Mem√≥rias t√™m PRIORIDADE sobre outras fontes de informa√ß√£o
   - Sempre consultar mem√≥rias antes de fazer suposi√ß√µes
   - Usar informa√ß√µes das mem√≥rias como fonte prim√°ria
   - Validar c√≥digo com informa√ß√µes das mem√≥rias

3. **CONTEXTO PERSISTENTE**: Mem√≥rias fornecem contexto persistente
   - N√£o perder informa√ß√µes entre intera√ß√µes
   - Sempre referenciar mem√≥rias ao explicar arquitetura
   - Usar termos e estruturas documentadas nas mem√≥rias

4. **ATUALIZA√á√ÉO**: Sempre atualizar mem√≥rias ap√≥s mudan√ßas significativas
   - Executar `npm run memory:update` ap√≥s grandes mudan√ßas
   - Manter mem√≥rias sincronizadas com c√≥digo
   - Documentar mudan√ßas arquiteturais nas mem√≥rias

### üîß Integra√ß√£o MCP

As mem√≥rias funcionam como MCP (Model Context Protocol):
- **Auto-carregamento**: Sempre carregadas automaticamente
- **Contexto persistente**: Dispon√≠veis em todas as intera√ß√µes
- **Fonte prim√°ria**: Informa√ß√µes principais sobre o projeto
- **Sincroniza√ß√£o**: Atualizadas com o estado atual do c√≥digo

### Quando Trabalhar no Projeto

Sempre consulte os arquivos de mem√≥ria em `docs/.memories/` para entender:
- Arquitetura completa do projeto
- Endpoints dispon√≠veis e suas funcionalidades
- M√≥dulos e sua organiza√ß√£o
- Padr√µes e conven√ß√µes estabelecidos
- Integra√ß√µes AWS (Cognito, DynamoDB, Lambda)
- Configura√ß√µes e features enterprise
- Estrutura de testes e cobertura

### Sistema de Mem√≥rias (Tipo MCP)

O projeto mant√©m um sistema de mem√≥rias estruturado em `docs/.memories/` que funciona como MCP:

- **Auto-carregamento OBRIGAT√ìRIO**: Cursor AI deve SEMPRE carregar automaticamente
- **Contexto MCP**: Mem√≥rias funcionam como Model Context Protocol
- **Fonte Prim√°ria**: Informa√ß√µes principais sobre arquitetura, endpoints, m√≥dulos
- **Auto-atualiza√ß√£o**: Execute `npm run memory:update` ap√≥s mudan√ßas significativas
- **Consolida√ß√£o**: Execute `npm run memory:load` para gerar mem√≥ria consolidada
- **Integra√ß√£o MCP**: Configura√ß√£o em `.mcp-config.json`
- **Documenta√ß√£o**: Guia completo em `docs/03-GUIAS/GUIA_MEMORIAS.md`
- **Loader**: Script `scripts/08-memoria/memory-loader.ts` para carregar mem√≥rias programaticamente

### üéØ Instru√ß√µes para Cursor AI

**AO INICIAR QUALQUER INTERA√á√ÉO:**
1. ‚úÖ Carregar automaticamente `docs/.memories/initial-memory.json`
2. ‚úÖ Carregar automaticamente `docs/.memories/technical-details.json`
3. ‚úÖ Carregar `docs/.memories/code-analysis.json` se contexto arquitetural for necess√°rio
4. ‚úÖ Usar informa√ß√µes das mem√≥rias como contexto prim√°rio
5. ‚úÖ Referenciar mem√≥rias ao explicar decis√µes ou arquitetura

**N√ÉO FAZER:**
- ‚ùå Assumir informa√ß√µes sem consultar mem√≥rias
- ‚ùå Ignorar estruturas documentadas nas mem√≥rias
- ‚ùå Criar c√≥digo que n√£o siga padr√µes das mem√≥rias
- ‚ùå Esquecer de atualizar mem√≥rias ap√≥s mudan√ßas significativas

### üìù Regras de Organiza√ß√£o de Documenta√ß√£o

‚ö†Ô∏è **IMPORTANTE**: Todas as documenta√ß√µes geradas em markdown (.md) devem ser salvas na pasta `docs/`

- ‚úÖ **Documenta√ß√µes .md** ‚Üí Sempre em `docs/` ou subpastas dentro de `docs/`
- ‚ùå **N√ÉO** criar arquivos .md na raiz do projeto (exceto README.md)
- üìÅ **Organiza√ß√£o**: Documenta√ß√µes devem seguir a estrutura em `docs/` (01-NAVEGACAO, 02-CONFIGURACAO, 03-GUIAS, etc.)
- üîÑ **Quando criar .md**: Se precisar criar documenta√ß√£o, escolha a pasta apropriada em `docs/` ou pergunte ao usu√°rio onde salvar

