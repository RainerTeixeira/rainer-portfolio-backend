/**
 * Interface do Repositório de Categorias
 */

import type { Category, CreateCategoryData, UpdateCategoryData } from '../../modules/categories/category.model.js';

export interface ICategoriesRepository {
  /**
   * Cria uma nova categoria
   */
  create(data: CreateCategoryData): Promise<Category>;

  /**
   * Busca categoria por ID
   */
  findById(categoryId: string): Promise<Category | null>;

  /**
   * Busca categoria por slug
   */
  findBySlug(slug: string): Promise<Category | null>;

  /**
   * Busca categorias em destaque
   */
  findAll(): Promise<Category[]>;

  /**
   * Lista todas as categorias
   * Verifica se slug já existe
   */
  isSlugTaken(slug: string, excludeId?: string): Promise<boolean>;

  /**
   * Atualiza uma categoria
   */
  update(categoryId: string, data: UpdateCategoryData): Promise<Category>;

  /**
   * Deleta uma categoria
   */
  delete(categoryId: string): Promise<boolean>;

  /**
   * Move categoria para outro pai
   */
  move(categoryId: string, newParentId?: string): Promise<Category>;

  /**
   * Reordena categorias
   */
  reorder(categoryIds: string[]): Promise<void>;

  /**
   * Obtém árvore completa de categorias
   */
  getTree(): Promise<Category[]>;

  /**
   * Conta posts em categoria e subcategorias
   */
  countPosts(categoryId: string): Promise<number>;

  /**
   * Verifica se categoria tem posts
   */
  hasPosts(categoryId: string): Promise<boolean>;
}
