/**
 * Interface do Repositório de Notificações
 */

import type { Notification, CreateNotificationData } from '../../modules/notifications/notification.model.js';

export interface INotificationsRepository {
  /**
   * Cria uma nova notificação
   */
  create(data: CreateNotificationData): Promise<Notification>;

  /**
   * Busca notificação por ID
   */
  findById(notificationId: string): Promise<Notification | null>;

  /**
   * Lista notificações de um usuário
   */
  findByUser(userId: string, params?: {
    page?: number;
    limit?: number;
    unreadOnly?: boolean;
  }): Promise<{
    notifications: Notification[];
    pagination: {
      page: number;
      limit: number;
      total: number;
      totalPages: number;
    };
  }>;

  /**
   * Marca notificação como lida
   */
  markAsRead(notificationId: string): Promise<Notification>;

  /**
   * Marca todas as notificações de um usuário como lidas
   */
  markAllAsRead(userId: string): Promise<void>;

  /**
   * Marca notificação como não lida
   */
  markAsUnread(notificationId: string): Promise<Notification>;

  /**
   * Deleta uma notificação
   */
  delete(notificationId: string): Promise<boolean>;

  /**
   * Deleta todas as notificações lidas de um usuário
   */
  deleteReadNotifications(userId: string): Promise<number>;

  /**
   * Conta notificações não lidas de um usuário
   */
  countUnread(userId: string): Promise<number>;

  /**
   * Conta notificações por tipo
   */
  countByType(userId: string): Promise<Record<string, number>>;
}
