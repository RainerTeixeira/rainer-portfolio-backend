/**
 * Interface do Repositório de Comentários
 */

import type { Comment, CreateCommentData, UpdateCommentData } from '../../modules/comments/comment.model.js';

export interface ICommentsRepository {
  /**
   * Cria um novo comentário
   */
  create(data: CreateCommentData): Promise<Comment>;

  /**
   * Busca comentário por ID
   */
  findById(commentId: string): Promise<Comment | null>;

  /**
   * Lista comentários de um post com paginação
   */
  findByPost(postId: string, params?: {
    page?: number;
    limit?: number;
    parentCommentId?: string;
  }): Promise<{
    comments: Comment[];
    pagination: {
      page: number;
      limit: number;
      total: number;
      totalPages: number;
    };
  }>;

  /**
   * Lista comentários de um autor
   */
  findByAuthor(authorId: string, params?: {
    page?: number;
    limit?: number;
  }): Promise<{
    comments: Comment[];
    pagination: {
      page: number;
      limit: number;
      total: number;
      totalPages: number;
    };
  }>;

  /**
   * Lista respostas de um comentário
   */
  findReplies(parentCommentId: string, params?: {
    page?: number;
    limit?: number;
  }): Promise<{
    comments: Comment[];
    pagination: {
      page: number;
      limit: number;
      total: number;
      totalPages: number;
    };
  }>;

  /**
   * Atualiza um comentário
   */
  update(commentId: string, data: UpdateCommentData): Promise<Comment>;

  /**
   * Deleta um comentário
   */
  delete(commentId: string): Promise<boolean>;

  /**
   * Verifica se usuário é autor do comentário
   */
  isAuthor(commentId: string, userId: string): Promise<boolean>;

  /**
   * Conta comentários de um post
   */
  countByPost(postId: string): Promise<number>;

  /**
   * Conta comentários de um autor
   */
  countByAuthor(authorId: string): Promise<number>;
}
